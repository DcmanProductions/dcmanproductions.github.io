/* LFInteractive LLC. All Rights Reserved */
async function register(t){let e=new FormData(t),a=await fetch("/assets/php/auth.php?c=staff&s=lfinteractive&m=register",{method:"POST",body:e});if(a.ok){let t=await a.json();if(null==t.error)return await login(e.email,e.password,!1),!0;alert(t.error)}return!1}async function login(t,e,a){let o=new FormData;o.append("username",t),o.append("password",e);let r=await fetch("/assets/php/auth.php?c=staff&s=lfinteractive&m=login",{method:"POST",body:o});if(r.ok){let e=await r.json();if(null==e.error){let o=e.token;a?(document.cookie=`auth_username=${t}; expires=${new Date(3e3).toUTCString()};path=/`,document.cookie=`auth_token=${o}; expires=${new Date(3e3).toUTCString()}; path=/`):(document.cookie=`auth_username=${t}; path=/`,document.cookie=`auth_token=${o}; path=/`)}}}$("form#staff-registration-form.form .btn.primary").click(async()=>{let t=await register($("form#staff-registration-form.form")[0]);window.location.href=t?"/staff-portal":"/error?c=500"});